<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="js/EventList.js"></script>
<script
	src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
	<script src="js/lib/dust/dust.js"></script>
	<script src="js/lib/dust/compiler.js"></script>
	<script src="js/lib/dust/dust-helpers.js"></script>
	<script src="js/lib/dust/parser.js"></script>
  <script src="js/lib/dust/server.js"></script>
</head>
<body>
	<script language="javascript">
	
	function testDust() {
	  var compiled = dust.compile("Hello {name}!", "intro");
	  dust.loadSource(compiled);
    dust.render("intro", {name: "Fred"}, function(err, out) {
      //console.log(out);
      alert(out);
    });
	}
	
    function addToListWithDust() {
        $.ajax({
          cache : false,
          type : "GET",
          async : false,
          dataType : "json",
          url : 'http://localhost:8080/TheEvent/event/list',
          success : function(data) {
            var eventList = new EventList();
            eventList.add(data);
            eventList.renderToDustTemplate();
          },
          error : function(xhr) {
            alert(xhr.responseText);
          }
        });
      }	
	
		function addToList() {
			$.ajax({
				cache : false,
				type : "GET",
				async : false,
				dataType : "json",
				url : 'http://localhost:8080/TheEvent/event/list',
				success : function(data) {
					var eventList = new EventList();
					eventList.add(data);
					eventList.renderToHtml();
				},
				error : function(xhr) {
					alert(xhr.responseText);
				}
			});
		}
	</script>
	<div data-role="page">

		<div data-role="header">
			<h1>My Title</h1>
		</div>
		<!-- /header -->
    <button type="button" onclick="testDust()">Dust</button>
    <button type="button" onclick="addToListWithDust()">Add To List With Dust</button>
		<button type="button" onclick="addToList()">Add To List</button>
		<div data-role="content">
			<ul data-role="listview" data-inset="true" data-filter="true"
				id="contentToAdd">
			</ul>
		</div>
	</div>
	<!-- /content -->


	<!-- /page -->

</body>
</html>